(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[473],{8552:function(e,r,t){"use strict";var n=t(6265),s={aws_project_region:"eu-west-2",aws_appsync_graphqlEndpoint:"https://yi7rnjbqnbdahm3lsnaec2l4w4.appsync-api.eu-west-2.amazonaws.com/graphql",aws_appsync_region:"eu-west-2",aws_appsync_authenticationType:"API_KEY",aws_appsync_apiKey:"da2-garhbkwfubfsvlmi46zfkf5g6m",aws_cognito_identity_pool_id:"eu-west-2:117bad27-728c-4a40-a7fb-319750788689",aws_cognito_region:"eu-west-2",aws_user_pools_id:"eu-west-2_HelPbu0yR",aws_user_pools_web_client_id:"2np8d9qrblfgtsptpglboesh4v",oauth:{domain:"bookstats28d2ca84-28d2ca84-dev.auth.eu-west-2.amazoncognito.com",scope:["phone","email","openid","profile","aws.cognito.signin.user.admin"],redirectSignIn:"http://localhost:3000/",redirectSignOut:"http://localhost:3000/",responseType:"code"},federationTarget:"COGNITO_USER_POOLS"};function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}t(283).ZP.configure(o(o({},s),{},{ssr:!0}))},1009:function(e,r,t){"use strict";var n=t(5893);r.Z=function(e){var r=e.errors;return(0,n.jsx)("div",{className:"p-2 border-l-4 border-red-500 bg-red-300 text-gray-700 rounded-sm mt-1 mb-2",children:r})}},7512:function(e,r,t){"use strict";t.d(r,{Z:function(){return i}});var n=t(5893),s=t(7294),a=t(8285),o=function(){return(0,n.jsx)("div",{className:"spinner mr-2"})},i=function(e){var r=e.labelName,t=(0,s.useContext)(a.Z).isLoading;return(0,n.jsxs)("button",{className:"flex flex-row items-center justify-center text-white w-full  mt-6 bg-pink-600 hover:bg-pink-800 p-2 rounded",type:"submit",children:[t&&(0,n.jsx)(o,{})," ",r]})}},5711:function(e,r,t){"use strict";var n=t(5893),s=t(6265),a=t(8347),o=t(7513);function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}r.Z=function(e){e.labelName;var r=(0,a.Z)(e,["labelName"]);return(0,n.jsxs)("div",{className:"mt-3",children:[(0,n.jsx)("label",{htmlFor:e.name,className:"text-sm capitalize",children:e&&e.labelName?e.labelName:e.name}),(0,n.jsx)(o.gN,c({className:"outline-none border border-gray-300 rounded p-2 mt-2 w-full focus:shadow-input focus:border-pink-400"},r))]})}},1437:function(e,r,t){"use strict";var n=t(6265),s=t(5893);function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}r.Z=function(e){return(0,s.jsx)("img",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){(0,n.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({src:"/book.svg"},e))}},4207:function(e,r,t){"use strict";t.d(r,{w:function(){return n}});var n={INDEX:"/",AUTH:"/auth",BOOKS:"/books",ADD_BOOK:"/add-book"}},8285:function(e,r,t){"use strict";t.d(r,{a:function(){return b},Z:function(){return x}});var n,s=t(5893),a=t(7294),o=t(6265),i="SET_USER",c="SET_UI_STATE",u="SET_IS_LOADING",l="SET_UPDATED_BOOK";function p(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function d(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?p(Object(t),!0).forEach((function(r){(0,o.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var f=(n={},(0,o.Z)(n,i,(function(e,r){return d(d({},e),{},{user:r.payload})})),(0,o.Z)(n,c,(function(e,r){return d(d({},e),{},{uiState:r.payload})})),(0,o.Z)(n,u,(function(e,r){return d(d({},e),{},{isLoading:r.payload})})),(0,o.Z)(n,l,(function(e,r){return d(d({},e),{},{updatedBook:r.payload})})),n),m=function(e,r){var t=f[r.type];return t?t(e,r):e},h=(0,a.createContext)(null),b=function(e){var r=e.children,t=(0,a.useReducer)(m,{user:null,uiState:null,loadingForm:!1,updatedBook:null}),n=t[0],o=t[1];return(0,s.jsx)(h.Provider,{value:{user:n.user,uiState:n.uiState,isLoading:n.isLoading,updatedBook:n.updatedBook,setUser:function(e){return o({type:i,payload:e})},setUiState:function(e){return o({type:c,payload:e})},setIsLoading:function(e){return o({type:u,payload:e})},setUpdatedBook:function(e){return o({type:l,payload:e})}},children:r})},x=h},5661:function(e,r,t){"use strict";t.d(r,{zE:function(){return u},y1:function(){return p},_f:function(){return f},zB:function(){return h},w7:function(){return x},gF:function(){return j},vG:function(){return y}});var n=t(809),s=t.n(n),a=t(2447),o=t(3011),i=(t(8552),t(4207)),c=t(9066);function u(e,r){return l.apply(this,arguments)}function l(){return(l=(0,a.Z)(s().mark((function e(r,t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.g.currentAuthenticatedUser();case 3:n=e.sent,r(n),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),r(null),t.push(i.w.AUTH);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function p(e,r,t,n){return d.apply(this,arguments)}function d(){return(d=(0,a.Z)(s().mark((function e(r,t,n,a){var i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.email,u=r.password,e.prev=1,t(!0),e.next=5,o.g.signUp({username:i,password:u,attributes:{email:i}});case 5:n("confirmSignUp"),a(i),t(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),c.ZP.error(e.t0.message),t(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function f(e,r,t,n){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(s().mark((function e(r,t,n,a){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(!0),e.next=4,o.g.confirmSignUp(t,r.authCode);case 4:n(null),a(!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c.ZP.error(e.t0.message),a(!1);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function h(e,r,t,n){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)(s().mark((function e(r,t,n,a){var u,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=r.email,l=r.password,e.prev=1,n(!0),e.next=5,o.g.signIn(u,l);case 5:t("signedIn"),n(!1),a.push(i.w.BOOKS),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),c.ZP.error(e.t0.message),n(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})))).apply(this,arguments)}function x(e,r,t){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)(s().mark((function e(r,t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.g.signOut();case 3:return r(null),t(null),e.next=7,n.push(i.w.INDEX);case 7:c.ZP.success("You have been disconnected"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),c.ZP.error(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function j(e,r,t){return g.apply(this,arguments)}function g(){return(g=(0,a.Z)(s().mark((function e(r,t,n){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.g.forgotPassword(r.email);case 3:t("forgotPasswordSubmit"),n(r.email),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c.ZP.error(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function y(e,r,t,n){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)(s().mark((function e(r,t,n,a){var i,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.password,u=r.authCode,e.prev=1,e.next=4,o.g.forgotPasswordSubmit(n,u,i);case 4:t(null),a(null),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),c.ZP.error(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}},7051:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return _}});var n=t(5893),s=t(7294),a=(t(8552),t(1163)),o=t(8285),i=t(1664),c=t(1437),u=function(e){var r=e.children;return(0,n.jsxs)("div",{className:"w-full bg-gray-100 min-h-screen",children:[(0,n.jsx)("div",{className:"p-2 border-b border-gray-300 text-center",children:(0,n.jsx)(i.default,{href:"/",children:(0,n.jsx)("a",{className:"rounded-full flex justify-center items-center text-center text-2xl font-bold",children:(0,n.jsx)(c.Z,{className:"w-20 h-20 p-3 bg-indigo-100 rounded-full"})})})}),(0,n.jsx)("div",{className:"flex items-center justify-center mt-20",children:(0,n.jsx)("div",{className:"shadow-md w-5/6 md:w-4/6 xl:w-2/6 bg-white p-12 shadow-form rounded-md",children:r})})]})},l=t(7513),p=t(9501),d=t(5711),f=t(1009),m=t(7512),h=function(e){var r=e.setUiState,t=e.signUp,s=p.Ry().shape({name:p.Z_().required("User name is required"),email:p.Z_().email("Invalid Email.").required("Email is required"),password:p.Z_().required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@_$!%*#?&])[A-Za-z\d@_$!%*#?&]{6,}$/,"Must Contain 6 Characters, One Uppercase, One Lowercase, One Number and one special case Character")});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-3xl pb-2 font-black text-center",children:"Sign up for an account"}),(0,n.jsx)(l.J9,{initialValues:{name:"",email:"",password:""},validationSchema:s,onSubmit:t,children:function(e){var t=e.errors,s=e.touched;return(0,n.jsxs)(l.l0,{children:[(0,n.jsx)(d.Z,{name:"name",id:"name",type:"text"}),s.name&&t.name&&(0,n.jsx)(f.Z,{errors:t.name}),(0,n.jsx)(d.Z,{name:"email",id:"email",type:"text"}),s.email&&t.email&&(0,n.jsx)(f.Z,{errors:t.email}),(0,n.jsx)(d.Z,{name:"password",id:"password",type:"password"}),s.password&&t.password&&(0,n.jsx)(f.Z,{errors:t.password}),(0,n.jsx)(m.Z,{labelName:"Sign Up"}),(0,n.jsxs)("p",{className:"mt-8 text-sm font-bold",children:["Have an account?",(0,n.jsx)("span",{onClick:function(){return r(null)},role:"button",className:"ml-2 cursor-pointer text-pink-600 hover:text-pink-800",children:"Sign In"})]})]})}})]})},b=function(e){var r=e.setUiState,t=e.confirmSignUp,s=p.Ry().shape({authCode:p.Z_().required("A code is required")});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-3xl pb-2 font-black text-center",children:"Confirm your account"}),(0,n.jsx)(l.J9,{initialValues:{authCode:""},validationSchema:s,onSubmit:t,children:function(e){var t=e.errors,s=e.touched;return(0,n.jsxs)(l.l0,{children:[(0,n.jsx)(d.Z,{name:"authCode",id:"authCode",type:"text",labelName:"Confirmation Code"}),s.authCode&&t.authCode&&(0,n.jsx)(f.Z,{errors:t.authCode}),(0,n.jsx)(m.Z,{labelName:"Confirm Sign Up"}),(0,n.jsx)("button",{onClick:function(){return r(null)},className:"text-sm mt-6 text-pink-500",children:"Cancel"})]})}})]})},x=t(3550),w=t(1672),j=t(6265);function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var y=function(e){return(0,n.jsx)("img",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){(0,j.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({src:"/google.svg"},e))},v=function(){return(0,n.jsx)("div",{className:"flex flex-col",children:(0,n.jsx)("button",{className:"focus:outline-none",onClick:function(){return x.ZP.federatedSignIn({provider:w.JG.Google})},children:(0,n.jsxs)("div",{className:"flex border border-gray-300 p-2  rounded items-center justify-center hover:text-white hover:bg-gray-500 hover:border-gray-600",children:[(0,n.jsx)(y,{className:"w-4 h-4"}),(0,n.jsx)("p",{className:"ml-3",children:"Sign in with Google"})]})})})},O=function(e){var r=e.setUiState,t=e.signIn,s=p.Ry().shape({email:p.Z_().email("Invalid Email.").required("Email is required"),password:p.Z_().required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@_$!%*#?&])[A-Za-z\d@_$!%*#?&]{6,}$/,"Must Contain 6 Characters, One Uppercase, One Lowercase, One Number and one special case Character")});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-3xl pb-2 font-black text-center",children:"Sign in to your account"}),(0,n.jsx)(l.J9,{initialValues:{email:"",password:""},validationSchema:s,onSubmit:t,children:function(e){var t=e.errors,s=e.touched;return(0,n.jsxs)(l.l0,{children:[(0,n.jsx)(d.Z,{id:"email",name:"email",type:"text"}),s.email&&t.email&&(0,n.jsx)(f.Z,{errors:t.email}),(0,n.jsx)(d.Z,{name:"password",id:"password",type:"password"}),s.password&&t.password&&(0,n.jsx)(f.Z,{errors:t.password}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("span",{onClick:function(){return r("forgotPassword")},className:"underline text-sm text-pink-600 hover:text-pink-800 cursor-pointer",children:"Forgot your Password?"})}),(0,n.jsx)(m.Z,{labelName:"Sign In"}),(0,n.jsx)("div",{className:"my-5 border border-gray-300"}),(0,n.jsx)(v,{}),(0,n.jsxs)("p",{className:"mt-8 text-sm font-bold",children:["Don't have an account?",(0,n.jsx)("span",{onClick:function(){return r("signUp")},role:"button",className:"ml-2 cursor-pointer text-pink-600 hover:text-pink-800",children:"Sign Up"})]})]})}})]})},P=function(e){var r=e.forgotPasswordSubmit,t=p.Ry().shape({authCode:p.Z_().required("A code is required"),password:p.Z_().required("Please Enter your password").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@_$!%*#?&])[A-Za-z\d@_$!%*#?&]{6,}$/,"Must Contain 6 Characters, One Uppercase, One Lowercase, One Number and one special case Character")});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-3xl pb-2 font-black text-center",children:"Confirm new Password"}),(0,n.jsx)(l.J9,{initialValues:{authCode:"",password:""},validationSchema:t,onSubmit:r,children:function(e){var r=e.errors,t=e.touched;return(0,n.jsxs)(l.l0,{children:[(0,n.jsx)(d.Z,{name:"authCode",type:"text",id:"authCode",labelName:"Confirmation Code"}),t.authCode&&r.authCode&&(0,n.jsx)(f.Z,{errors:r.authCode}),(0,n.jsx)(d.Z,{type:"password",name:"password",id:"password",labelName:"New Password"}),t.password&&r.password&&(0,n.jsx)(f.Z,{errors:r.password}),(0,n.jsx)(m.Z,{labelName:"Submit New Password"})]})}})]})},Z=function(e){var r=e.setUiState,t=e.forgotPassword,s=p.Ry().shape({email:p.Z_().email("Invalid Email.").required("Email is required")});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"text-3xl pb-2 font-black text-center",children:"Forgot Password"}),(0,n.jsx)(l.J9,{initialValues:{email:""},validationSchema:s,onSubmit:t,children:function(e){var t=e.errors,s=e.touched;return(0,n.jsxs)(l.l0,{children:[(0,n.jsx)(d.Z,{id:"email",type:"text",name:"email"}),s.email&&t.email&&(0,n.jsx)(f.Z,{errors:t.email}),(0,n.jsx)(m.Z,{labelName:"Reset Password"}),(0,n.jsx)("button",{onClick:function(){return r(null)},className:"text-sm mt-6 text-pink-500",children:"Cancel"})]})}})]})},S=t(5661),_=function(){var e=(0,a.useRouter)(),r=(0,s.useContext)(o.Z),t=r.user,i=r.setUser,c=r.uiState,l=r.setUiState,p=r.setIsLoading;return(0,n.jsxs)(u,{children:[!c&&(0,n.jsx)(O,{setUiState:l,signIn:function(r){return(0,S.zB)(r,l,p,e)}}),"signUp"===c&&(0,n.jsx)(h,{setUiState:l,signUp:function(e){return(0,S.y1)(e,p,l,i)}}),"confirmSignUp"===c&&(0,n.jsx)(b,{setUiState:l,confirmSignUp:function(e){return(0,S._f)(e,t,l,p)}}),"forgotPassword"===c&&(0,n.jsx)(Z,{setUiState:l,forgotPassword:function(e){return(0,S.gF)(e,l,i)}}),"forgotPasswordSubmit"===c&&(0,n.jsx)(P,{forgotPasswordSubmit:function(e){return(0,S.vG)(e,l,t,i)}})]})}},7418:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth",function(){return t(7051)}])},6249:function(){}},function(e){e.O(0,[774,708,631,351,170,361,548,501],(function(){return r=7418,e(e.s=r);var r}));var r=e.O();_N_E=r}]);